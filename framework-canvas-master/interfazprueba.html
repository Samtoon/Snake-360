<head>
  <style>
    @font-face {
    font-family: 'Retro Gaming';
    src: url('RetroGaming.woff2') format('woff2'),
        url('RetroGaming.woff') format('woff'),
        url('RetroGaming.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
    </style>
    
</head>
<canvas id="canvas" width="300" height="300"></canvas>
<script src="web-lib/processing.js"></script>
<script src="web-lib/functional-light.js"></script>
<script src="web-lib/buzz.min.js"></script>

<script>
  //Vamos a usar http://processingjs.org/
  // Importamos las librerias
  let { append, cons, first, isEmpty, isList, length, rest } = functionalLight;
  function make(data, attribute) {
    return Object.assign({}, data, attribute);
  }
  
  function sketchProc(processing) {
    /**
     * Esto se llama antes de iniciar el juego
     */
    processing.setup = function () {
      document.getElementById("canvas").focus();
      processing.frameRate(60);
      processing.size(800, 400);
      processing.background(10, 200, 50);
      
      MyFont = processing.createFont("Retro Gaming");
      processing.state = {title: {rgb: [0,255,0],font: processing.createFont("Retro Gaming")},frame: 0, play: true,
      sound: new buzz.sound("web-lib/s1",{formats: ["mp3"],autoplay: true,preload: true})};
    }
    /**
    * Actualiza el mundo en cada tic del reloj. Retorna el nuevo stado del mundo
    */
    processing.onTic = function (world) {
      
      if (world.frame<30)
      {
      return make(world, {title: make(world.title,{rgb: titlecolor(world.title.rgb)}),frame: world.frame+1,play: true});
      }
      return make(world, {title: make(world.title,{rgb: titlecolor(world.title.rgb)}),frame: 0});
    }

    function titlecolor(color)
    {
        if(color[0]==255&&color[1]<255&&color[2]==0)
        {
            return cons(color[0],cons(color[1]+1,rest(rest(color))));
        }
        if(color[0]>0&&color[1]==255)
        {
            return cons(color[0]-1,cons(color[1],rest(rest(color))));
        }
        if(color[1]==255&&color[2]<255)
        {
            return cons(color[0],cons(color[1],[color[2]+1]));
        }
        if(color[1]>0&&color[2]==255)
        {
            return cons(color[0],cons(color[1]-1,[color[2]]));
        }
        if(color[0]<255&&color[2]==255)
        {
            return cons(color[0]+1,cons(color[1],[color[2]]));
        }
        if(color[0]==255&&color[2]>0)
        {
            return cons(color[0],cons(color[1],[color[2]-1]));
        }
    }
    /**
    * Actualiza el mundo cada vez que se oprime una tecla. Retorna el nuevo stado del mundo
    */
    processing.onKeyEvent = function (world, keyCode) {
      if(keyCode==processing.ENTER)
      {
        window.open("movement.html","_self")
      }
      return make(world,{});
    }
    // Dibuja algo en el canvas. Aqui se pone todo lo que quieras pintar
    processing.drawGame = function (world) {
      processing.background(0, 0, 0);
      processing.fill(world.title.rgb[0], world.title.rgb[1], world.title.rgb[2]);
      var fontList = PFont.list();
      processing.println(fontList);
      processing.textFont(world.title.font);
      processing.textSize(70);
      processing.textAlign(processing.CENTER);
      processing.text("SNAKE EVOLUTION",400,100);
      if(world.frame<15)
      {
        processing.fill(255,255,255)
      }
      else{
        processing.fill(255,255,0)
      }
      
      processing.textSize(30)
      processing.text("PLAY",400,300)
      processing.fill(255,255,255)
      processing.textSize(10)
      processing.text(world.sound.isPaused()+","+world.play,730,390);
      if(world.play)
      {
        world.sound.play();
      }
      
    }
    // Esta es la función que pinta todo. Se ejecuta 60 veces por segundo. 
    // No cambie esta función. Su código debe ir en drawGame
    processing.draw = function () {
      
      processing.drawGame(processing.state);
      processing.state = processing.onTic(processing.state);
    };
    // Esta función se ejecuta cada vez que presionamos una tecla. 
    // No cambie esta función. Su código debe ir en onKeyEvent
    processing.keyPressed = function () {
      processing.state = processing.onKeyEvent(processing.state, processing.keyCode);
    }
  }
  var canvas = document.getElementById("canvas");
  // Adjuntamos nuestro sketch al framework de processing
  var processingInstance = new Processing(canvas, sketchProc);
</script>